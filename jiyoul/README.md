웹 서버 (Web Server)
- HTTP 기반으로 동작.
- 정적 리소스, 기타 부가기능
- 정적 파일(HTML, CSS, JS, 이미지, 영상) 제공
- 예) NGINX, APACHE

웹 애플리케이션 서버 (WAS - Web Application Server)
- HTTP 기반으로 동작
- 웹 서버 기능 포함 + 정적 리소스 제공 가능
- 프로그램 코드를 실행 해서 애플리케이션 로직 수행
  -> 동적 HTML, HTTP API(JSON)
  -> 서블릿, JSP, 스프링 MVC
- Tomcat, Jetty, Undertow

서블릿 응답 흐름
1. WAS는 웹브라우저로 부터 HTTP 요청을 받을시 Request, Response 객체를 새로 만들어서 호출함.
2. 개발자는 Request 객체에서 HTTP 요청 정보를 편리하게 꺼내서 사용할 수 있음.
3. 개발자는 응답 정보도 Response 객체에서 참조하여 만들어준 Response에 편리하게 입력 가능.
4. WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보를 생성함.

웹브라우저로 부터 요청이 올때 마다 쓰레드 생성할 시 장단점

장점
- 동시 요청을 처리 할 수 있다.
- 리소스(CPU, 메모리)가 허용 할 때 까지 처리가능
- 하나의 쓰레드가 지연되어도, 나머지 쓰레드는 정상 동작이 된다.
  단점
- 쓰레드는 생성 비용은 매우 비싸다.
  -> 고객의 요청이 올 때 마다 쓰레드를 생성하면, 응답 속도가 늦어진다.
- 쓰레드는 컨텍스트 스위칭 비용이 발생한다.
  -> CPU에 쓰레드를 번갈아가며 처리할때 (스위칭) 비용이 발생한다.
- 쓰레드 생성에 제한이 없다.
  -> 고객 요청이 너무 많이 오면 CPU, 메모리 임계점을 넘어서 서버가 죽을 수 있다.

쓰레드 풀
-  필요한 쓰레드를 쓰레드 풀에 보관하고 관리함.
   -> 요청마다 쓰레드의 생성의 단점을 보완.
- 쓰레드의 최대치 갯수를 지정해 놓았는데 그이상 호출시 쓰레드 대기, 거절 될 수 있다.(특정 숫자 만큼만 대기 하도록 설정가능.)
- 쓰레드가 필요시 쓰레드 풀에 이미 생성되있는 쓰레드를 가져가고, 다쓰면 쓰레드 풀로 다시 반납함.
- 쓰레드가 미리 생성되어 있으므로, 쓰레드를 생성하고 종료 하는 비용(CPU)이 절약되고 빠름.
- 너무 많은 요청이 와도 최대치가 있기 때문에 안전하게 처리가 가능함.

WAS는 멀티 쓰레드에 대한 부분은 다 지원해주므로 개발자는 멀티 쓰레드 관련 코드에 대해 신경 쓰지 않아도 됌.
-> 단, 멀티 쓰레드 환경이므로 싱글톤 객체(서블릿, 스프링 빈)는 주의 해서 사용해야 함.

HTTP 주고 받을때 백앤드 개발자가 고민해야 할 것.
- 정적리소스 제공
- 동적 HTML 페이지
- HTTP API

서버 사이드 렌더링(SSR)
- 서버에서 최종 HTML을 생성해서 전달.
- 주로 정적인 화면에 사용.
- JSP, 타임리프
- 백엔드 개발자는 서버 사이드 렌더링 기술 학습하기.(타임리프 해보자)

클라이언트 사이드 렌더링
- HTML 결과를 자바스크립트를 사용해 웹 브라우저에서 동적으로 생성해서 적용함.
- 주로 동적인 화면에 사용, 웹 환경을 마치 앱처럼 필요한 부분부분 변경 할 수 있음.
- 구글 지도, Gmail, 구글 캘린더
- React, Vue.js
- 클라이언트 사이드 렌더링 순서
1. (웹 브라우저) 서버로 order.html을 요청함
2. (서버) 웹 브라우저로 빈 HTML과 자바스크립트 링크를 전송함.
3. (웹 브라우저) 서버로 자바스크립트를 요청함.
4. (서버) 웹 브라우저로 JavaScript(클라이언트 로직, HTML 렌더링 코드가 들어있음)을 전송함.
5. (웹 브라우저) 서버로 HTTP API 데이터 요청함.
6. (서버) JSON으로 해당 데이터를 전송해줌.
7. (웹 브라우저) 이전에 받은 JavaScript로 HTML 만들어 결과를 렌더링함.

스프링 웹 기술
Spring Boot
- WAS 서버를 내장하고있음.
  Web Servlet
- 애노테이션 기반의 스프링 MVC 사용.

Web Reactive (최신기술)
- 스프링 웹 플럭스(Spring WebFlux)
- 비동기 넌 블러킹 처리.
- 최소한의 쓰레드로 최대 성능을 냄.(쓰레드의 컨텍스트 스위칭 비용이 효율적임.)
- 함수형 스타일로 개발하여 동시처리 코드 효율화
- 서블릿 기술을 사용하지 않음.
- 기술적 난이도가 매우 높음.
- 아직 관계형 데이터 베이스(RDB) 지원이 부족함.
- 아직은 실무에서 많이 사용하지 않음.

자바 뷰 템플릿 역사
JSP
- 속도가 느림, 기능부족
  프리마커
- 속도 문제 해결, 다양한 기능
  타임리프
- 내추럴 템플릿 : HTML의 모양을 유지하면서 뷰 템플릿 적용 가능.
- 스프링 MVC와 강력한 기능 통합
- 최선의 선택, 단 성능은 프리마커, 벨로시티가 더 빠름


------------------------------------------------------------------------------------------------------------------------------------------

※ 2일차 ※

HTTP 요청 메시지 로그 콘솔로 확인하기.
-> application.properties에 logging.level.org.apache.coyote.http11=debug 입력
-> 성능저하 발생할 수 있으니 개발단계에서만 사용하자.

GET방식 Query 파라미터 값 받아올때.
HttpServletRequest request;
request.getParameter('name'); 중복시 첫번째 값을 반환함.
request.getParameterValues('name') 하면 중복 파라미터 값을 배열로 반환함.(중복으로는 잘 사용안함.)

POST HTML Form형식으로 데이터를 전송할땐 HTTP 메시지 바디에 해당 데이터를 포함해서 보내기때문에
바디에 포함된 데이터가 어떤 형식인지 content-type을 꼭 지정해 주어야 한다. 'application/x-www-form-urlencoded'
